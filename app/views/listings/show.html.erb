<p id="notice"><%= notice %></p>

<div> 
  <% if @listing.picture.attached? %>
    <%= image_tag @listing.picture, alt: @listing.name %>
  <% else %>
    <%= image_tag "/app/assets/images/image_default.jpg", alt: @listing.name %>
  <% end %>
</div>

<%# Checks if listing seller user.id matches current_user. Display 'Buy me!' button if it doesn't match %>
<% if @listing.sold %>
  <h4>SOLD</h4>
<% elsif current_user && current_user.id == @listing.user_id %>
  <h4>This item already belongs to you.</h4>
<% elsif current_user %>
  <%= button_to "Buy me!", place_order_path %>
<% else %>
  <h4>Please log in to make a purchase</h4>
<% end %>

<p>
  <strong>Name:</strong>
  <%= @listing.name %>
</p>

<p>
  <strong>Description:</strong>
  <%= @listing.description %>
</p>

<p>
  <strong>Condition:</strong>
  <%= @listing.condition %>
</p>

<p>
  <strong>Size:</strong>
  <%= @listing.size %>
</p>

<p>
  <strong>Price:</strong>
  <%= @listing.price %>
</p>

<p>
  <strong>Sold:</strong>
  <%= @listing.sold %>
</p>

<p>
  <strong>User:</strong>
  <%= @listing.user_id%>
</p>

<p>
  <strong>Category:</strong>
  <%= @listing.category_id %>
</p>

<%# Authorise current_user to Edit if user.id matches with listing.user_id %>
<% if current_user.id == @listing.user_id %>
  <%= link_to 'Edit', edit_listing_path(@listing) %> |
<% end %>

<%= link_to 'Back', listings_path %>
